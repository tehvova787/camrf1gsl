# Камеры Москвы

Веб-сервис для ретрансляции потоков с камер наблюдения города Москвы с использованием базы данных SQLite и Python Flask.

## Описание

Данный сервис позволяет просматривать потоки с камер наблюдения, расположенных в различных районах Москвы и других регионах России. Пользователь может выбрать интересующую его камеру из списка, и соответствующий поток будет отображен на экране.

## Функциональность

- Список камер с названиями локаций, загружаемый из базы данных
- Автоматическое определение типа контента (изображение или видео)
- Адаптивный дизайн для просмотра на различных устройствах
- Простой и понятный интерфейс
- Бэкенд на Python Flask с API для работы с камерами
- База данных SQLite для хранения информации о камерах

## Требования

- Python 3.8+
- Flask
- Flask-SQLAlchemy
- Beautiful Soup 4 (для миграции данных)

## Установка и запуск

1. Установите зависимости:

```bash
pip install -r requirements.txt
```

1. Инициализируйте базу данных:

```bash
python -c "from app import app, db; app.app_context().push(); db.create_all()"
```

1. Мигрируйте данные из HTML в базу данных (если требуется):

```bash
python migrate_data.py
```

1. Запустите сервер:

```bash
python app.py
```

1. Откройте в браузере [http://localhost:5000](http://localhost:5000)

## API Endpoints

### Получить все камеры

`GET /api/cameras`

### Получить конкретную камеру

`GET /api/cameras/<camera_id>`

### Добавить новую камеру

`POST /api/cameras`

Пример тела запроса:

```json
{
  "name": "Название камеры",
  "url": "https://example.com/camera-stream",
  "is_video": true,
  "district": "Центральный"
}
```

## Структура проекта

- `app.py` - основной файл Flask-приложения с API и моделью данных
- `index.html` - основной HTML-файл
- `styles.css` - стили для оформления интерфейса
- `script.js` - скрипт для работы с API и отображения потоков
- `migrate_data.py` - скрипт для миграции данных из HTML в базу данных
- `requirements.txt` - список зависимостей
- `cameras.db` - файл базы данных SQLite (создается автоматически) 
